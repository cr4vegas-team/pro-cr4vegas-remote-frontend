<!-- CONTENT -->

<div mat-dialog-content>

  <div>
    <h1 mat-dialog-title><span class="unit-icon fas fa-home"></span>
      &nbsp;Modificar
      &nbsp;{{ unitStationPechina.unit.sector ? unitStationPechina.unit.sector.code : "" }}
      &nbsp;Estación Pechina
      &nbsp;{{unitStationPechina.unit.code }}
      <span *ngFor="let set of unitStationPechina.unit.sets; let i = index"><span *ngIf="i > 0"><b>,
          </b></span><b>{{
          set.name }}</b></span>
    </h1>
  </div>

  <form [formGroup]="unitStationPechinaForm">

    <div class="row">

      <!-- RIGHT COL -->

      <div class="col-md-4 col-12 text-center" formGroupName="unit">

        <div class="mb-2">
          <mat-checkbox class="example-margin" formControlName="active">Activo</mat-checkbox>
        </div>

        <img class="unit-image mb-2" [src]="imageURL" />

        <div>
          <button type="button" mat-raised-button (click)="fileInput.click()">
            Seleccionar imagen
          </button>
        </div>
        <input hidden (change)="onFileSelected($event)" #fileInput type="file" id="file" />
      </div>

      <!-- CENTER COL -->

      <div class="col-md-4 col-12" formGroupName="unit">
        <mat-form-field appearance="fill">
          <mat-label>Código</mat-label>
          <input matInput formControlName="code" type="number" required />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Latitud</mat-label>
          <input matInput type="number" step=".00001" formControlName="latitude" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Longitud</mat-label>
          <input matInput type="number" step=".00001" formControlName="longitude" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Altitud</mat-label>
          <input matInput type="number" formControlName="altitude" />
        </mat-form-field>

      </div>

      <!-- LEFT COL -->

      <div class="col-md-4 col-12" formGroupName="unit">
        <mat-form-field appearance="fill">
          <mat-label>Sector</mat-label>
          <mat-select [compareWith]="compareUnitStationPechina" formControlName="sector">
            <mat-option *ngFor="let sector of sectors" [value]="sector">{{ sector.name }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Conjuntos</mat-label>
          <mat-select [compareWith]="compareUnitStationPechina" multiple formControlName="sets">
            <mat-option *ngFor="let set of sets" [value]="set">{{
              set.name
              }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

    </div>

    <div formGroupName="unit">
      <mat-form-field appearance="fill">
        <mat-label>Descripción</mat-label>
        <textarea matInput formControlName="description"></textarea>
      </mat-form-field>
    </div>
  </form>
</div>

<!-- ACTIONS -->

<div mat-dialog-actions>
  <button mat-raised-button mat-dialog-close>Cerrar</button>
  <button mat-raised-button type="submit" (click)="accept()">Aceptar</button>
</div>
